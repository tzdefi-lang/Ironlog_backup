@import "tailwindcss";
@custom-variant dark (&:where(.dark, .dark *));

/* Global polish for the PWA */
:root {
  /* Reduce the bright iOS tap highlight */
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  --standalone-safe-top: 0px;
  --ease-smooth: cubic-bezier(0.2, 0.72, 0.2, 1);
  --ease-spring: cubic-bezier(0.18, 0.9, 0.22, 1.08);
  --ease-cinematic: cubic-bezier(0.22, 0, 0.12, 1);
  --dur-fast: 150ms;
  --dur-med: 220ms;
  --dur-slow: 280ms;
  --brand-yellow: #ffff8c;
  --brand-yellow-text: #b8a800;
  --brand-yellow-tint: rgba(255, 255, 140, 0.22);
  --brand-yellow-tint-strong: rgba(255, 255, 140, 0.32);
  --brand-yellow-border: rgba(255, 255, 140, 0.65);
  --brand-yellow-ring: rgba(255, 255, 140, 0.55);
  --brand-yellow-glow-soft: rgba(255, 255, 140, 0.34);
  --brand-yellow-glow-strong: rgba(255, 255, 140, 0.42);
  --app-bg: #ffffff;
  --app-fg: #111827;
  --surface-muted: #f9fafb;
  --nav-shadow: rgba(17, 24, 39, 0.06);
  --accent-glow-soft: var(--brand-yellow-glow-soft);
  --accent-glow-strong: var(--brand-yellow-glow-strong);
  --chart-tooltip-bg: rgba(255, 255, 255, 0.9);
  --chart-tooltip-border: rgba(148, 163, 184, 0.28);
  --chart-tooltip-shadow: rgba(15, 23, 42, 0.14);
  --chart-tooltip-label: #0f172a;
  --chart-tooltip-text: #334155;
  --stats-grid-stroke: #e5e7eb;
  --stats-axis-stroke: #9ca3af;
  --stats-line-primary: #2563eb;
  --stats-line-secondary: #0f766e;
  --stats-line-danger: #ef4444;
  --stats-bar-primary: #60a5fa;
  --stats-bar-accent: var(--brand-yellow);
  --stats-highlight: var(--brand-yellow);
  --stats-cursor-line: rgba(100, 116, 139, 0.45);
  --stats-cursor-fill: rgba(15, 23, 42, 0.04);
}

html.dark {
  --brand-yellow-text: var(--brand-yellow);
  --brand-yellow-tint: rgba(255, 255, 140, 0.14);
  --brand-yellow-tint-strong: rgba(255, 255, 140, 0.22);
  --brand-yellow-border: rgba(255, 255, 140, 0.5);
  --brand-yellow-ring: rgba(255, 255, 140, 0.36);
  --brand-yellow-glow-soft: rgba(255, 255, 140, 0.24);
  --brand-yellow-glow-strong: rgba(255, 255, 140, 0.34);
  --app-bg: #030712;
  --app-fg: #f3f4f6;
  --surface-muted: #111827;
  --nav-shadow: rgba(2, 6, 23, 0.45);
  --accent-glow-soft: var(--brand-yellow-glow-soft);
  --accent-glow-strong: var(--brand-yellow-glow-strong);
  --chart-tooltip-bg: rgba(17, 24, 39, 0.88);
  --chart-tooltip-border: rgba(71, 85, 105, 0.45);
  --chart-tooltip-shadow: rgba(2, 6, 23, 0.45);
  --chart-tooltip-label: #f8fafc;
  --chart-tooltip-text: #e2e8f0;
  --stats-grid-stroke: #334155;
  --stats-axis-stroke: #94a3b8;
  --stats-line-primary: var(--brand-yellow);
  --stats-line-secondary: rgba(255, 255, 140, 0.72);
  --stats-line-danger: #f87171;
  --stats-bar-primary: #64748b;
  --stats-bar-accent: var(--brand-yellow);
  --stats-highlight: var(--brand-yellow);
  --stats-cursor-line: rgba(255, 255, 140, 0.46);
  --stats-cursor-fill: rgba(255, 255, 140, 0.12);
}

@media (prefers-color-scheme: dark) {
  html:not(.light):not(.dark) {
    --brand-yellow-text: var(--brand-yellow);
    --brand-yellow-tint: rgba(255, 255, 140, 0.14);
    --brand-yellow-tint-strong: rgba(255, 255, 140, 0.22);
    --brand-yellow-border: rgba(255, 255, 140, 0.5);
    --brand-yellow-ring: rgba(255, 255, 140, 0.36);
    --brand-yellow-glow-soft: rgba(255, 255, 140, 0.24);
    --brand-yellow-glow-strong: rgba(255, 255, 140, 0.34);
    --app-bg: #030712;
    --app-fg: #f3f4f6;
    --surface-muted: #111827;
    --nav-shadow: rgba(2, 6, 23, 0.45);
    --accent-glow-soft: var(--brand-yellow-glow-soft);
    --accent-glow-strong: var(--brand-yellow-glow-strong);
    --chart-tooltip-bg: rgba(17, 24, 39, 0.88);
    --chart-tooltip-border: rgba(71, 85, 105, 0.45);
    --chart-tooltip-shadow: rgba(2, 6, 23, 0.45);
    --chart-tooltip-label: #f8fafc;
    --chart-tooltip-text: #e2e8f0;
    --stats-grid-stroke: #334155;
    --stats-axis-stroke: #94a3b8;
    --stats-line-primary: var(--brand-yellow);
    --stats-line-secondary: rgba(255, 255, 140, 0.72);
    --stats-line-danger: #f87171;
    --stats-bar-primary: #64748b;
    --stats-bar-accent: var(--brand-yellow);
    --stats-highlight: var(--brand-yellow);
    --stats-cursor-line: rgba(255, 255, 140, 0.46);
    --stats-cursor-fill: rgba(255, 255, 140, 0.12);
  }
}

.app-shell {
  box-sizing: border-box;
  padding-top: var(--standalone-safe-top);
}

html.ios-standalone {
  --standalone-safe-top: calc(max(env(safe-area-inset-top, 0px), 12px) + 2px);
}

html, body {
  height: 100%;
  background: var(--app-bg);
  color: var(--app-fg);
  /* Prefer Apple system font on iOS/macOS; fall back cleanly elsewhere */
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  overscroll-behavior: none;
}

#root {
  height: 100%;
}

input, button, textarea, select {
  font: inherit;
}

a, button {
  transition:
    color var(--dur-fast) var(--ease-smooth),
    background-color var(--dur-fast) var(--ease-smooth),
    border-color var(--dur-fast) var(--ease-smooth),
    transform var(--dur-fast) var(--ease-smooth),
    box-shadow var(--dur-med) var(--ease-smooth),
    filter var(--dur-fast) var(--ease-smooth),
    opacity var(--dur-fast) var(--ease-smooth);
}

/* Keep scrolling feeling native */
body {
  margin: 0;
  overflow: hidden;
}

/* Only specific content regions should scroll */
.scroll-area {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* Hide browser focus outlines on Recharts surfaces when tapping/clicking charts. */
.recharts-wrapper:focus,
.recharts-wrapper:focus-visible,
.recharts-responsive-container:focus,
.recharts-responsive-container:focus-visible,
.recharts-surface:focus,
.recharts-surface:focus-visible,
.recharts-pie:focus,
.recharts-pie:focus-visible,
.recharts-sector:focus,
.recharts-sector:focus-visible,
.recharts-pie-sector:focus,
.recharts-pie-sector:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

/* Exercise detail bottom sheet (iOS-style). */
.exercise-detail-backdrop {
  opacity: 0;
  transition: opacity 320ms var(--ease-smooth);
  will-change: opacity;
}

.exercise-detail-backdrop.is-open {
  opacity: 1;
}

.exercise-detail-sheet {
  transform: translate3d(0, 100%, 0);
  transition: transform 420ms var(--ease-spring);
  will-change: transform;
}

.exercise-detail-sheet.is-dragging {
  transition: none !important;
}

.exercise-detail-sheet.is-open {
  transform: translate3d(0, 0, 0);
}

@media (prefers-reduced-motion: reduce) {
  .exercise-detail-backdrop,
  .exercise-detail-sheet {
    transition: none !important;
  }
}

/* Hide scrollbars for horizontal carousels (still scrollable). */
.hide-scrollbar {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge legacy */
}

.hide-scrollbar::-webkit-scrollbar {
  display: none;
}

/* Stronger snap feel for swipe-only carousels. */
.snap-stop-always {
  scroll-snap-stop: always;
}

/* Brand helpers (yellow = #FFFF8C). */
.bg-brand {
  background-color: var(--brand-yellow);
}

.bg-brand-tint {
  background-color: var(--brand-yellow-tint);
}

.bg-brand-tint-strong {
  background-color: var(--brand-yellow-tint-strong);
}

.text-brand {
  color: var(--brand-yellow-text);
}

.border-brand {
  border-color: var(--brand-yellow-border);
}

.shadow-brand-soft {
  --tw-shadow-color: var(--brand-yellow-glow-soft);
}

.shadow-brand-strong {
  --tw-shadow-color: var(--brand-yellow-glow-strong);
}

.ring-brand {
  --tw-ring-color: var(--brand-yellow-ring);
}

.focus-border-brand:focus {
  border-color: var(--brand-yellow) !important;
}

/* Starter splash overlay. */
.starter-splash {
  position: fixed;
  inset: 0;
  z-index: 3000;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: all;
}

.starter-splash.is-exiting {
  /* Don't block the app while the sheet collapses. */
  pointer-events: none;
}

.starter-splash__bg {
  position: absolute;
  inset: 0;
  background: var(--brand-yellow);
  clip-path: inset(0 0 0 0 round 0px);
  will-change: clip-path;
}

.starter-splash__logo {
  width: min(220px, 58vw);
  height: auto;
  position: relative;
  will-change: transform, opacity, filter;
}

.starter-splash.is-exiting .starter-splash__bg {
  animation: starter-splash-collapse 690ms var(--ease-cinematic) both;
}

.starter-splash.is-exiting .starter-splash__logo {
  animation: starter-splash-logo 420ms var(--ease-cinematic) both;
}

@keyframes starter-splash-logo {
  0% {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
    filter: blur(0);
  }
  100% {
    opacity: 0;
    transform: translate3d(0, -10px, 0) scale(0.94);
    filter: blur(1px);
  }
}

@keyframes starter-splash-collapse {
  0% {
    clip-path: inset(0 0 0 0 round 0px);
  }
  62% {
    clip-path: inset(0 0 46% 0 round 0px);
  }
  88% {
    clip-path: inset(0 0 calc(100% - var(--standalone-safe-top)) 0 round 0px 0px 22px 22px);
  }
  100% {
    clip-path: inset(0 0 100% 0 round 0px);
  }
}

/* Generic bottom sheet (ActionMenu / pickers). */
.bottom-sheet-backdrop {
  opacity: 0;
  transition: opacity 280ms var(--ease-smooth);
  will-change: opacity;
}

.bottom-sheet-backdrop.is-open {
  opacity: 1;
}

.bottom-sheet-panel {
  transform: translate3d(0, 100%, 0);
  transition: transform 380ms var(--ease-spring);
  will-change: transform;
}

.bottom-sheet-panel.is-dragging {
  transition: none !important;
}

.bottom-sheet-panel.is-open {
  transform: translate3d(0, 0, 0);
}

@media (prefers-reduced-motion: reduce) {
  .bottom-sheet-backdrop,
  .bottom-sheet-panel {
    transition: none !important;
  }
}

/* Set row animations. */
@keyframes set-row-in {
  0% {
    opacity: 0;
    transform: translate3d(0, 8px, 0) scale(0.99);
  }
  100% {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
  }
}

.set-row-enter {
  animation: set-row-in 260ms var(--ease-spring) both;
}

@keyframes set-complete-pop {
  0% { transform: scale(1); }
  35% { transform: scale(0.86); }
  70% { transform: scale(1.08); }
  100% { transform: scale(1); }
}

.set-complete-pop {
  animation: set-complete-pop 240ms var(--ease-spring) both;
}

/* Harmonize all chart tooltips with app card style (soft, rounded, low-contrast). */
.recharts-default-tooltip {
  background: var(--chart-tooltip-bg) !important;
  border: 1px solid var(--chart-tooltip-border) !important;
  border-radius: 16px !important;
  box-shadow: 0 10px 24px var(--chart-tooltip-shadow) !important;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  padding: 10px 12px !important;
}

.recharts-tooltip-label {
  margin-bottom: 6px !important;
  color: var(--chart-tooltip-label) !important;
  font-size: 13px !important;
  font-weight: 800 !important;
  letter-spacing: 0.02em;
}

.recharts-tooltip-item {
  padding: 0 !important;
  color: var(--chart-tooltip-text) !important;
  font-size: 13px !important;
  font-weight: 700 !important;
}

/* Quick "pop" feedback for taps (used on bottom-nav + key buttons) */
@keyframes tap-pop {
  0% { transform: scale(1); }
  35% { transform: scale(0.88); }
  70% { transform: scale(1.06); }
  100% { transform: scale(1); }
}

/* Apply a quick, satisfying pop on press */
.pressable {
  will-change: transform;
  transform: translateZ(0);
}

.pressable:active {
  animation: tap-pop 220ms cubic-bezier(0.2, 0.8, 0.2, 1);
}

.tap-pop {
  animation: tap-pop 220ms cubic-bezier(0.2, 0.8, 0.2, 1);
}

.view-enter {
  animation: view-enter var(--dur-med) var(--ease-spring) both;
}

@keyframes view-enter {
  0% {
    opacity: 0;
    transform: translate3d(0, 18px, 0) scale(0.988);
    filter: saturate(0.9);
  }
  100% {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
    filter: saturate(1);
  }
}

.page-shell {
  height: 100%;
}

.page-shell--enter {
  animation: page-shell-in 170ms var(--ease-spring) backwards;
}

.page-shell--exit {
  will-change: opacity, transform, filter;
  animation: page-shell-out 120ms cubic-bezier(0.4, 0, 0.8, 0.2) both;
}

@keyframes page-shell-in {
  0% {
    opacity: 0;
    transform: translate3d(0, 14px, 0);
    filter: blur(1.5px);
  }
  100% {
    opacity: 1;
    transform: translate3d(0, 0, 0);
    filter: blur(0);
  }
}

@keyframes page-shell-out {
  0% {
    opacity: 1;
    transform: translate3d(0, 0, 0);
    filter: blur(0);
  }
  100% {
    opacity: 0;
    transform: translate3d(0, -8px, 0);
    filter: blur(1px);
  }
}

.calendar-month-frame {
  will-change: transform, opacity, filter;
}

.calendar-month-frame--next {
  animation: calendar-month-next 360ms var(--ease-smooth) both;
}

.calendar-month-frame--prev {
  animation: calendar-month-prev 360ms var(--ease-smooth) both;
}

@keyframes calendar-month-next {
  0% {
    opacity: 0.2;
    transform: translate3d(26px, 0, 0);
    filter: blur(1px);
  }
  100% {
    opacity: 1;
    transform: translate3d(0, 0, 0);
    filter: blur(0);
  }
}

@keyframes calendar-month-prev {
  0% {
    opacity: 0.2;
    transform: translate3d(-26px, 0, 0);
    filter: blur(1px);
  }
  100% {
    opacity: 1;
    transform: translate3d(0, 0, 0);
    filter: blur(0);
  }
}

.card-lift {
  transform: translateZ(0);
  transition:
    transform var(--dur-fast) var(--ease-smooth),
    box-shadow var(--dur-med) var(--ease-smooth),
    border-color var(--dur-fast) var(--ease-smooth),
    filter var(--dur-fast) var(--ease-smooth);
}

.card-lift:hover {
  transform: translate3d(0, -2px, 0);
  filter: saturate(1.02);
}

.card-lift:active {
  transform: translate3d(0, 0, 0) scale(0.985);
}

.list-stagger > * {
  opacity: 0;
  transform: translate3d(0, 10px, 0) scale(0.99);
  animation: list-item-in var(--dur-slow) var(--ease-spring) forwards;
}

.list-stagger > *:nth-child(1) { animation-delay: 16ms; }
.list-stagger > *:nth-child(2) { animation-delay: 28ms; }
.list-stagger > *:nth-child(3) { animation-delay: 40ms; }
.list-stagger > *:nth-child(4) { animation-delay: 52ms; }
.list-stagger > *:nth-child(5) { animation-delay: 64ms; }
.list-stagger > *:nth-child(6) { animation-delay: 76ms; }
.list-stagger > *:nth-child(7) { animation-delay: 88ms; }
.list-stagger > *:nth-child(8) { animation-delay: 100ms; }
.list-stagger > *:nth-child(9) { animation-delay: 112ms; }
.list-stagger > *:nth-child(10) { animation-delay: 124ms; }
.list-stagger > *:nth-child(11) { animation-delay: 136ms; }
.list-stagger > *:nth-child(12) { animation-delay: 148ms; }

@keyframes list-item-in {
  0% {
    opacity: 0;
    transform: translate3d(0, 10px, 0) scale(0.99);
  }
  100% {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
  }
}

.modal-backdrop {
  will-change: opacity, backdrop-filter;
}

.modal-backdrop--enter {
  animation: modal-backdrop-in 240ms var(--ease-smooth) both;
}

.modal-backdrop--exit {
  animation: modal-backdrop-out 180ms var(--ease-smooth) both;
}

.modal-panel {
  will-change: opacity, transform, filter;
}

.modal-panel--enter {
  animation: modal-panel-in var(--dur-med) var(--ease-spring) both;
}

.modal-panel--exit {
  animation: modal-panel-out 170ms cubic-bezier(0.42, 0, 1, 1) both;
}

.exercise-picker-modal-overlay.modal-backdrop--enter {
  animation: modal-backdrop-in 200ms var(--ease-smooth) both;
}

.exercise-picker-modal-overlay.modal-backdrop--exit {
  animation: modal-backdrop-out 220ms var(--ease-smooth) both;
}

.exercise-picker-modal-panel.modal-panel--enter {
  animation: exercise-picker-panel-in 260ms var(--ease-spring) both;
}

.exercise-picker-modal-panel.modal-panel--exit {
  animation: exercise-picker-panel-out 220ms cubic-bezier(0.32, 0, 0.67, 0) both;
}

@keyframes modal-backdrop-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes modal-backdrop-out {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes modal-panel-in {
  0% {
    opacity: 0;
    transform: translate3d(0, 16px, 0) scale(0.97);
    filter: blur(1px);
  }
  100% {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
    filter: blur(0);
  }
}

@keyframes modal-panel-out {
  0% {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
    filter: blur(0);
  }
  100% {
    opacity: 0;
    transform: translate3d(0, 10px, 0) scale(0.98);
    filter: blur(1px);
  }
}

@keyframes exercise-picker-panel-in {
  0% {
    opacity: 0;
    transform: translate3d(0, 84px, 0) scale(0.98);
    filter: blur(1px);
  }
  100% {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
    filter: blur(0);
  }
}

@keyframes exercise-picker-panel-out {
  0% {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
    filter: blur(0);
  }
  100% {
    opacity: 0;
    transform: translate3d(0, 84px, 0) scale(0.98);
    filter: blur(1px);
  }
}

.action-sheet-overlay {
  animation: modal-backdrop-in 240ms var(--ease-smooth) both;
}

.action-sheet-panel {
  will-change: transform, opacity;
  animation: action-sheet-in 360ms var(--ease-spring) both;
}

@keyframes action-sheet-in {
  from {
    opacity: 0;
    transform: translate3d(0, 28px, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

.float-glow {
  animation: float-glow 2.8s ease-in-out infinite;
}

@keyframes float-glow {
  0%, 100% {
    box-shadow: 0 10px 30px var(--accent-glow-soft);
    transform: translate3d(0, 0, 0);
  }
  50% {
    box-shadow: 0 16px 36px var(--accent-glow-strong);
    transform: translate3d(0, -2px, 0);
  }
}

.bottom-nav-shell {
  backdrop-filter: blur(14px);
  box-shadow: 0 -8px 28px var(--nav-shadow);
}

.bottom-nav-link[data-active='true'] {
  transform: translate3d(0, -2px, 0);
}

.bottom-nav-link svg {
  transition: transform var(--dur-fast) var(--ease-smooth);
}

.bottom-nav-link:hover svg {
  transform: translate3d(0, -1px, 0);
}

/* "Score" reveal used in the session report */
@keyframes score-pop {
  0% { transform: scale(0.94); opacity: 0.0; }
  55% { transform: scale(1.08); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}

.score-pop {
  animation: score-pop 360ms cubic-bezier(0.2, 0.9, 0.2, 1);
}

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 1ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 1ms !important;
    scroll-behavior: auto !important;
  }
}
